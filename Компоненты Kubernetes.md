# Домашнее задание "Компоненты Kubernetes"

# Задание 1

```
итого по запросам проекта
БД(3) - mem 12Gb, vCPU - 3
Кеш(3) - mem 12Gb, vCPU - 3
Фронтенд(5) - mem 250Mb, vCPU - 1 
Бекенд(10) - mem 6Gb, vCPU - 10
total - mem 30.25Gb, vCPU - 17
-------------------------------------
Делаем расчет из того что все крутиться на 3 нодах с возможностью поднятия нод,в случаи подения одной

| node1   | node2   | node3   |
|---------|---------|---------|
| БД1     | БД2     | БД3     |
| кеш1    | кеш2    | кеш3    | 
| Фронт1  | Фронт2  | Фронт3  |
| Фронт4  | Фронт5  | Бекенд1 |
| Бекенд2 | Бекенд3 | Бекенд4 |
| Бекенд5 | Бекенд6 | Бекенд7 |
| Бекенд8 | Бекенд9 | Бекенд10|
-------------------------------
```
*Для развертывания всех необходимых ресурсов для проекта требуется минимум 30,1 Гб оперативной памяти и 17 ядер.*

*Для большей отказоустойчивости базы данных и кэша следует разнести их копии по разным нодам, по этому для
развертывания используем тоже количество нод что и требуемых копий, что бы при сбои одного узла отключилось не более 1
реплики. Для одной ноды потребуется минимум 10,4 Гб оперативки и 5,7 ядер.*

*Для обеспечения повторного развертывания при отказе одной из нод, необходимо учесть дополнительные ресурсы на каждую 
ноду. Двум нодам необходимо по 15,5 Гб оперативки и 8,6 ядра (т.к. на одной ноде при равномерном распределении окажется на
один бекенд больше).*

## Так же следует учесть ресурсы необходимые для OS, kubelet и порог выселения.
```
ЦП резервируется со следующими распределениями:

6% от первого ядра.
1% следующего ядра (до 2 ядер).
0,5% следующих двух ядер (до 4).
0,25% любых ядер свыше четырех ядер.

Для памяти:

255 МБ памяти для машин с объемом памяти менее 1 ГБ.
25% от первых 4Гб памяти.
20% от следующих 4 ГБ памяти (до 8 ГБ).
10% от следующих 8 ГБ памяти (до 16 ГБ).
6% от следующих 112Гб памяти (до 128Гб).
2% любой памяти выше 128 ГБ.

Наконец, порог вытеснения обычно составляет 100 МБ.
Для ноды с 10 ядерным ЦП и 20 Гб оперативки система зарезервирует 90 милликорей и 2,84 Гб оперативки. Еще вычтем 100 Мб
порога вытеснения. В итоге для приложений останется 17,06 Гб оперативки и 9910 милликорей или 9.91 ядра. Что 
удовлетворяет характеристикам нод с учетом повторного развертывания при отказе одной из них.
```
## Минимальные ресурсы необходимые для проекта, это 3 worker nodes с 10 ядрами и 20 Гб оперативной памяти
